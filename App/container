# Dockerfile

# Stage 1: Define the base image
# Use an official, small Python runtime as the foundation.
# This gives us Python and the operating system tools we need.
FROM python:3.9-slim

# Stage 2: Set up the working environment
# Set the current working directory inside the container.
WORKDIR /app

# Stage 3: Install dependencies
# Copy the requirements file into the working directory.
COPY requirements.txt .

# Install all dependencies listed in requirements.txt.
# We use --no-cache-dir to keep the resulting image size smaller.
RUN pip install --no-cache-dir -r requirements.txt

# Stage 4: Add the application code
# Copy the entire contents of your current directory (including app.py and the 'templates' folder)
# into the container's working directory (/app).
COPY . .

# Stage 5: Configure the container
# Inform Docker that the container listens on port 8080 at runtime.
# This is documentation, not a firewall setting.
EXPOSE 5000

# Define environment variables used by app.py
ENV PORT=5000
ENV VERSION=v1.0.0

# Stage 6: Define the command to run the application
# This is the command that is executed when the container starts.
CMD ["python", "app1.py"]